#!/usr/bin/bash
apt update && apt upgrade -y

apt install proot-distro -y
proot-distro install debian

apt install x11-repo -y
apt install termux-x11-nightly pulseaudio -y

curl -sSL https://raw.githubusercontent.com/devedaniele/XenOS/main/.termux/audio >> $PATH/audio
chmod +x $PATH/audio

curl -sSL https://raw.githubusercontent.com/devedaniele/XenOS/main/.termux/.bashrc >> .bashrc
curl -sSL https://raw.githubusercontent.com/devedaniele/XenOS/main/.termux/.bash_aliases >> .bash_aliases

XENOS=$PREFIX/var/lib/proot-distro/installed-rootfs/debian/root

rm $XENOS/.bashrc 
cat > $XENOS/.bashrc  <<- EOF
#!/bin/bash
apt update && apt upgrade -y

apt install gnupg -y

rm -rf /etc/apt/sources.list
echo "deb http://http.kali.org/kali kali-rolling main contrib non-free" > /etc/apt/sources.list

curl -sSL https://archive.kali.org/archive-key.asc | apt-key add
mv /etc/apt/trusted.gpg /etc/apt/trusted.gpg.d

apt-get update -y && apt-get dist-upgrade -y

apt install git gh sudo curl -y

rm .bashrc
curl -sSL https://raw.githubusercontent.com/devedaniele/XenOS/main/.debian/bash.bashrc >> /etc/bash.bashrc
curl -sSL https://raw.githubusercontent.com/devedaniele/XenOS/main/.debian/.bash_aliases >> .bash_aliases
curl -sSL https://raw.githubusercontent.com/devedaniele/XenOS/main/.debian/.bashrc >> .bashrc


sleep 1
exit
EOF

pd login debian

curl -sSL https://raw.githubusercontent.com/devedaniele/XenOS/main/.termux/bash.bashrc >> $PREFIX/etc/bash.bashrc

exit